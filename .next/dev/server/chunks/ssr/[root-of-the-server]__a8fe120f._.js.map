{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/digital/OneDrive/Desktop/NEOdashboard/components/visualization/AsteroidVis.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useRef, useMemo } from 'react';\r\nimport { Canvas, useFrame } from '@react-three/fiber';\r\nimport { OrbitControls, Stars, Text, Float } from '@react-three/drei';\r\nimport * as THREE from 'three';\r\n\r\n// --- Types ---\r\ntype AsteroidWithData = {\r\n    id: string;\r\n    name: string;\r\n    estimated_diameter: {\r\n        meters: {\r\n            estimated_diameter_max: number;\r\n        };\r\n    };\r\n    close_approach_data: {\r\n        miss_distance: {\r\n            kilometers: string;\r\n        };\r\n        relative_velocity: {\r\n            kilometers_per_hour: string;\r\n        };\r\n    }[];\r\n    is_potentially_hazardous_asteroid: boolean;\r\n};\r\n\r\ninterface AsteroidVisProps {\r\n    neos: AsteroidWithData[];\r\n}\r\n\r\n// --- 3D Components ---\r\n\r\nfunction Earth() {\r\n    return (\r\n        <group>\r\n            <mesh>\r\n                <sphereGeometry args={[1, 32, 32]} />\r\n                <meshStandardMaterial\r\n                    color=\"#4361ee\"\r\n                    emissive=\"#102a43\"\r\n                    emissiveIntensity={0.2}\r\n                    roughness={0.7}\r\n                    metalness={0.1}\r\n                />\r\n            </mesh>\r\n            {/* Atmosphere Glow */}\r\n            <mesh scale={[1.1, 1.1, 1.1]}>\r\n                <sphereGeometry args={[1, 32, 32]} />\r\n                <meshBasicMaterial\r\n                    color=\"#4cc9f0\"\r\n                    transparent\r\n                    opacity={0.1}\r\n                    side={THREE.BackSide}\r\n                />\r\n            </mesh>\r\n        </group>\r\n    );\r\n}\r\n\r\nfunction Asteroid({ data }: { data: AsteroidWithData }) {\r\n    const meshRef = useRef<THREE.Mesh>(null);\r\n\r\n    // Normalize data for visualization\r\n    const diameter = data.estimated_diameter.meters.estimated_diameter_max;\r\n    const distanceKm = parseFloat(data.close_approach_data[0]?.miss_distance.kilometers || \"0\");\r\n    const isHazardous = data.is_potentially_hazardous_asteroid;\r\n\r\n    // Scale size: Logarithmic scale to make small asteroids visible but large ones not overwhelming\r\n    const size = Math.max(0.05, Math.log10(diameter) * 0.08);\r\n\r\n    // Position: Map distance to a visible range (e.g., 2 to 10 units away)\r\n    // Real scale is impossible, so we condense the astronomical units\r\n    const angle = Math.random() * Math.PI * 2;\r\n    const radius = 3 + (Math.log10(distanceKm) * 0.8);\r\n    const yOffset = (Math.random() - 0.5) * 2;\r\n\r\n    const position = useMemo(() => {\r\n        return new THREE.Vector3(\r\n            Math.cos(angle) * radius,\r\n            yOffset,\r\n            Math.sin(angle) * radius\r\n        );\r\n    }, [angle, radius, yOffset]);\r\n\r\n    useFrame((state, delta) => {\r\n        if (meshRef.current) {\r\n            meshRef.current.rotation.x += delta * 0.2;\r\n            meshRef.current.rotation.y += delta * 0.5;\r\n        }\r\n    });\r\n\r\n    const color = isHazardous ? \"#d90429\" : \"#a9a9a9\";\r\n\r\n    return (\r\n        <Float speed={1} rotationIntensity={1} floatIntensity={0.5}>\r\n            <group position={position}>\r\n                <mesh ref={meshRef} title={`Asteroid: ${data.name}`}>\r\n                    <dodecahedronGeometry args={[size, 0]} /> {/* Low poly look */}\r\n                    <meshStandardMaterial\r\n                        color={color}\r\n                        roughness={0.8}\r\n                        metalness={0.2}\r\n                        flatShading={true}\r\n                    />\r\n                </mesh>\r\n                {/* Label shown on hover? For now just static simplified text if hazardous */}\r\n                {isHazardous && (\r\n                    <Text\r\n                        position={[0, size + 0.2, 0]}\r\n                        fontSize={0.2}\r\n                        color=\"#ff0054\"\r\n                        anchorX=\"center\"\r\n                        anchorY=\"middle\"\r\n                    >\r\n                        !\r\n                    </Text>\r\n                )}\r\n            </group>\r\n        </Float>\r\n    );\r\n}\r\n\r\nexport default function AsteroidVis({ neos }: AsteroidVisProps) {\r\n    return (\r\n        <div className=\"w-full h-full bg-black\">\r\n            <Canvas camera={{ position: [0, 5, 8], fov: 60 }}>\r\n                <color attach=\"background\" args={['#000000']} />\r\n\r\n                <ambientLight intensity={0.2} />\r\n                <pointLight position={[10, 10, 10]} intensity={1.5} color=\"#ffd60a\" />\r\n                <pointLight position={[-10, -5, -10]} intensity={0.5} color=\"#4361ee\" />\r\n\r\n                <Stars radius={100} depth={50} count={5000} factor={4} saturation={0} fade speed={1} />\r\n\r\n                <Earth />\r\n\r\n                {neos.map((neo) => (\r\n                    <Asteroid key={neo.id} data={neo} />\r\n                ))}\r\n\r\n                <OrbitControls\r\n                    enablePan={false}\r\n                    minDistance={3}\r\n                    maxDistance={20}\r\n                    autoRotate\r\n                    autoRotateSpeed={0.5}\r\n                />\r\n            </Canvas>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/digital/OneDrive/Desktop/NEOdashboard/app/visualizer/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { ArrowLeft, Loader2, AlertCircle } from 'lucide-react';\r\nimport AsteroidVis from '@/components/visualization/AsteroidVis';\r\nimport axios from 'axios';\r\n\r\nexport default function VisualizerPage() {\r\n    const [neos, setNeos] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchNeos = async () => {\r\n            try {\r\n                const res = await axios.get('/api/neos');\r\n                // NASA API structure: near_earth_objects is an object with date keys\r\n                // We need to flatten this to get a list of all asteroids\r\n                const rawData = res.data.near_earth_objects;\r\n                const flattened = Object.values(rawData).flat();\r\n                setNeos(flattened as any);\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch NEOs\", err);\r\n                setError(\"Failed to load trajectory data. Please check your connection and try again.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchNeos();\r\n    }, []);\r\n\r\n    return (\r\n        <main className=\"w-screen h-screen relative bg-black overflow-hidden flex flex-col\">\r\n            {/* Header Overlay */}\r\n            <div className=\"absolute top-0 left-0 w-full z-20 p-6 flex justify-between items-start pointer-events-none\">\r\n                <Link href=\"/\" className=\"pointer-events-auto flex items-center group\">\r\n                    <div className=\"p-3 bg-black/60 border border-white/10 rounded-full backdrop-blur-md group-hover:border-cyan-glow/50 transition-colors\">\r\n                        <ArrowLeft className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                </Link>\r\n\r\n                <div className=\"text-right pointer-events-auto\">\r\n                    <h1 className=\"text-4xl font-black text-white tracking-widest uppercase mb-1 drop-shadow-md\">\r\n                        Trajectory Engine\r\n                    </h1>\r\n                    <p className=\"text-cyan-glow font-bold text-xs uppercase tracking-[0.2em]\">\r\n                        Live Near-Earth Object Visualizer\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Legend / Status Overlay */}\r\n            <div className=\"absolute bottom-8 left-8 z-20 bg-black/70 backdrop-blur-md p-4 rounded-xl border border-white/10 text-white w-64 pointer-events-none\">\r\n                <h3 className=\"text-xs font-bold uppercase text-void-gray mb-3 tracking-wider\">System Status</h3>\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-bold\">Objects Tracked</span>\r\n                    <span className=\"text-cyan-glow font-mono\">{neos.length}</span>\r\n                </div>\r\n                <div className=\"h-px bg-white/10 my-2\" />\r\n                <div className=\"space-y-2 text-xs\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-alert-red\" />\r\n                        <span className=\"text-white/80\">Hazardous Object</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-[#a9a9a9]\" />\r\n                        <span className=\"text-white/80\">Non-Hazardous</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-[#4361ee]\" />\r\n                        <span className=\"text-white/80\">Earth</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            <div className=\"flex-1 relative z-10 w-full h-full\">\r\n                {loading && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black\">\r\n                        <Loader2 className=\"w-12 h-12 text-cyan-glow animate-spin\" />\r\n                        <p className=\"mt-4 text-white text-sm uppercase tracking-widest absolute top-1/2 pt-10\">Initializing Orbit...</p>\r\n                    </div>\r\n                )}\r\n\r\n                {error && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black\">\r\n                        <div className=\"text-center\">\r\n                            <AlertCircle className=\"w-12 h-12 text-alert-red mx-auto mb-4\" />\r\n                            <p className=\"text-white text-lg font-bold\">{error}</p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {!loading && !error && (\r\n                    <AsteroidVis neos={neos} />\r\n                )}\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACpB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACN,MAAM,YAAY;YACd,IAAI;gBACA,MAAM,MAAM,MAAM,gJAAK,CAAC,GAAG,CAAC;gBAC5B,qEAAqE;gBACrE,yDAAyD;gBACzD,MAAM,UAAU,IAAI,IAAI,CAAC,kBAAkB;gBAC3C,MAAM,YAAY,OAAO,MAAM,CAAC,SAAS,IAAI;gBAC7C,QAAQ;YACZ,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,wBAAwB;gBACtC,SAAS;YACb,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG,EAAE;IAEL,qBACI,8OAAC;QAAK,WAAU;;0BAEZ,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAU;kCACrB,cAAA,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,6NAAS;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAI7B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAG7F,8OAAC;gCAAE,WAAU;0CAA8D;;;;;;;;;;;;;;;;;;0BAOnF,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAiE;;;;;;kCAC/E,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAU;0CAAoB;;;;;;0CACpC,8OAAC;gCAAK,WAAU;0CAA4B,KAAK,MAAM;;;;;;;;;;;;kCAE3D,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;;0CAEpC,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;;0CAEpC,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;;;;;;;;;;;;;;0BAM5C,8OAAC;gBAAI,WAAU;;oBACV,yBACG,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,4NAAO;gCAAC,WAAU;;;;;;0CACnB,8OAAC;gCAAE,WAAU;0CAA2E;;;;;;;;;;;;oBAI/F,uBACG,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,mOAAW;oCAAC,WAAU;;;;;;8CACvB,8OAAC;oCAAE,WAAU;8CAAgC;;;;;;;;;;;;;;;;;oBAKxD,CAAC,WAAW,CAAC,uBACV,8OAAC,sJAAW;wBAAC,MAAM;;;;;;;;;;;;;;;;;;AAKvC"}}]
}