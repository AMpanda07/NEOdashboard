{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/digital/OneDrive/Desktop/NEOdashboard/components/visualization/CesiumAsteroidVis.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport Head from 'next/head';\r\n\r\n// Types for asteroid data\r\ntype AsteroidData = {\r\n    id: string;\r\n    name: string;\r\n    estimated_diameter: {\r\n        meters: {\r\n            estimated_diameter_max: number;\r\n        };\r\n    };\r\n    close_approach_data: Array<{\r\n        miss_distance: {\r\n            kilometers: string;\r\n            astronomical: string;\r\n        };\r\n        relative_velocity: {\r\n            kilometers_per_hour: string;\r\n        };\r\n        close_approach_date_full: string;\r\n    }>;\r\n    is_potentially_hazardous_asteroid: boolean;\r\n};\r\n\r\ninterface CesiumAsteroidVisProps {\r\n    neos: AsteroidData[];\r\n}\r\n\r\n// Planetary orbital data (semi-major axis in AU, eccentricity, inclination in degrees)\r\nconst PLANET_DATA = [\r\n    { name: 'Mercury', a: 0.387, e: 0.206, i: 7.0, color: '#8C7853', size: 4879 },\r\n    { name: 'Venus', a: 0.723, e: 0.007, i: 3.4, color: '#FFC649', size: 12104 },\r\n    { name: 'Earth', a: 1.000, e: 0.017, i: 0.0, color: '#4A90E2', size: 12742 },\r\n    { name: 'Mars', a: 1.524, e: 0.093, i: 1.9, color: '#E27B58', size: 6779 },\r\n    { name: 'Jupiter', a: 5.203, e: 0.048, i: 1.3, color: '#C88B3A', size: 139820 },\r\n    { name: 'Saturn', a: 9.537, e: 0.054, i: 2.5, color: '#FAD5A5', size: 116460 },\r\n    { name: 'Uranus', a: 19.191, e: 0.047, i: 0.8, color: '#4FD0E7', size: 50724 },\r\n    { name: 'Neptune', a: 30.069, e: 0.009, i: 1.8, color: '#4166F5', size: 49244 }\r\n];\r\n\r\nconst AU_TO_METERS = 149597870700;\r\nconst SCALE_FACTOR = 0.00000001;\r\n\r\nexport default function CesiumAsteroidVis({ neos }: CesiumAsteroidVisProps) {\r\n    const cesiumContainerRef = useRef<HTMLDivElement>(null);\r\n    const viewerRef = useRef<any>(null);\r\n    const [isPlaying, setIsPlaying] = useState(true);\r\n    const [speed, setSpeed] = useState(1);\r\n    const [cesiumLoaded, setCesiumLoaded] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Load Cesium script dynamically\r\n    useEffect(() => {\r\n        if (typeof window === 'undefined') return;\r\n\r\n        // Check if already loaded\r\n        if ((window as any).Cesium) {\r\n            setCesiumLoaded(true);\r\n            return;\r\n        }\r\n\r\n        // Add CSS\r\n        const link = document.createElement('link');\r\n        link.href = 'https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Widgets/widgets.css';\r\n        link.rel = 'stylesheet';\r\n        document.head.appendChild(link);\r\n\r\n        // Add script\r\n        const script = document.createElement('script');\r\n        script.src = 'https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Cesium.js';\r\n        script.async = true;\r\n        script.onload = () => setCesiumLoaded(true);\r\n        script.onerror = () => setError('Failed to load 3D visualization library');\r\n        document.head.appendChild(script);\r\n\r\n        return () => {\r\n            // Cleanup\r\n        };\r\n    }, []);\r\n\r\n    // Initialize Cesium viewer\r\n    useEffect(() => {\r\n        if (!cesiumLoaded || !cesiumContainerRef.current) return;\r\n\r\n        const Cesium = (window as any).Cesium;\r\n        if (!Cesium) return;\r\n\r\n        try {\r\n            // Set access token (demo token for basic use)\r\n            Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0MjQ0NDdmZi03MWE2LTQxZDctOThmNy1jZjgzMWQzZTlkNTkiLCJpZCI6MjM5NzM3LCJpYXQiOjE3MjY0ODc1ODF9.Hn4AxQg7BSPBF_Xow0c69Cl8E9tZvI-gJcZ9V4vxnJ4';\r\n\r\n            // Create viewer with minimal settings for reliability\r\n            const viewer = new Cesium.Viewer(cesiumContainerRef.current, {\r\n                sceneMode: Cesium.SceneMode.SCENE3D,\r\n                infoBox: true,\r\n                selectionIndicator: true,\r\n                baseLayerPicker: false,\r\n                geocoder: false,\r\n                homeButton: false,\r\n                sceneModePicker: false,\r\n                timeline: false,\r\n                navigationHelpButton: false,\r\n                animation: false,\r\n                skyAtmosphere: false,\r\n                shadows: false,\r\n                shouldAnimate: true\r\n            });\r\n\r\n            // Configure scene\r\n            viewer.scene.globe.show = false;\r\n            viewer.scene.backgroundColor = Cesium.Color.BLACK;\r\n            viewer.scene.sun.show = false;\r\n            viewer.scene.moon.show = false;\r\n\r\n            viewerRef.current = viewer;\r\n\r\n            // Add Sun (center)\r\n            const sunSize = 30;\r\n            viewer.entities.add({\r\n                name: 'Sun',\r\n                position: Cesium.Cartesian3.ZERO,\r\n                point: {\r\n                    pixelSize: sunSize,\r\n                    color: Cesium.Color.YELLOW,\r\n                    outlineColor: Cesium.Color.ORANGE,\r\n                    outlineWidth: 3\r\n                },\r\n                label: {\r\n                    text: 'SUN',\r\n                    font: 'bold 14px sans-serif',\r\n                    fillColor: Cesium.Color.YELLOW,\r\n                    style: Cesium.LabelStyle.FILL_AND_OUTLINE,\r\n                    outlineColor: Cesium.Color.BLACK,\r\n                    outlineWidth: 2,\r\n                    pixelOffset: new Cesium.Cartesian2(0, -40),\r\n                    showBackground: true,\r\n                    backgroundColor: new Cesium.Color(0, 0, 0, 0.7)\r\n                }\r\n            });\r\n\r\n            // Add planets\r\n            PLANET_DATA.forEach((planet, index) => {\r\n                const orbitRadius = planet.a * 100; // Scale for visibility\r\n                const planetAngle = (index * 45) * Math.PI / 180; // Spread planets\r\n\r\n                // Orbital path\r\n                const orbitPoints = [];\r\n                for (let i = 0; i <= 360; i += 5) {\r\n                    const angleRad = i * Math.PI / 180;\r\n                    orbitPoints.push(new Cesium.Cartesian3(\r\n                        orbitRadius * Math.cos(angleRad),\r\n                        orbitRadius * Math.sin(angleRad),\r\n                        0\r\n                    ));\r\n                }\r\n\r\n                viewer.entities.add({\r\n                    polyline: {\r\n                        positions: orbitPoints,\r\n                        width: 1,\r\n                        material: new Cesium.Color.fromCssColorString(planet.color).withAlpha(0.3)\r\n                    }\r\n                });\r\n\r\n                // Planet\r\n                const planetX = orbitRadius * Math.cos(planetAngle);\r\n                const planetY = orbitRadius * Math.sin(planetAngle);\r\n                const planetPixelSize = Math.max(6, Math.log10(planet.size) * 3);\r\n\r\n                viewer.entities.add({\r\n                    name: planet.name,\r\n                    position: new Cesium.Cartesian3(planetX, planetY, 0),\r\n                    point: {\r\n                        pixelSize: planetPixelSize,\r\n                        color: Cesium.Color.fromCssColorString(planet.color)\r\n                    },\r\n                    label: {\r\n                        text: planet.name.toUpperCase(),\r\n                        font: '11px sans-serif',\r\n                        fillColor: Cesium.Color.WHITE,\r\n                        style: Cesium.LabelStyle.FILL_AND_OUTLINE,\r\n                        outlineColor: Cesium.Color.BLACK,\r\n                        outlineWidth: 2,\r\n                        pixelOffset: new Cesium.Cartesian2(0, -15),\r\n                        showBackground: true,\r\n                        backgroundColor: new Cesium.Color(0, 0, 0, 0.7),\r\n                        distanceDisplayCondition: new Cesium.DistanceDisplayCondition(0, 2000)\r\n                    },\r\n                    description: `<div style=\"padding:10px;font-family:sans-serif;\">\r\n                        <h3>${planet.name}</h3>\r\n                        <p>Distance from Sun: ${planet.a} AU</p>\r\n                        <p>Diameter: ${planet.size.toLocaleString()} km</p>\r\n                    </div>`\r\n                });\r\n            });\r\n\r\n            // Add asteroids\r\n            neos.forEach((neo) => {\r\n                const distanceAU = parseFloat(neo.close_approach_data[0]?.miss_distance.astronomical || \"0.1\");\r\n                const isHazardous = neo.is_potentially_hazardous_asteroid;\r\n                const diameter = neo.estimated_diameter.meters.estimated_diameter_max;\r\n\r\n                // Position in NEO belt (between Mars and Jupiter)\r\n                const neoRadius = 150 + distanceAU * 50; // Scale for visibility\r\n                const neoAngle = Math.random() * Math.PI * 2;\r\n                const neoZ = (Math.random() - 0.5) * 20;\r\n\r\n                const x = neoRadius * Math.cos(neoAngle);\r\n                const y = neoRadius * Math.sin(neoAngle);\r\n\r\n                viewer.entities.add({\r\n                    name: neo.name.replace(/[()]/g, ''),\r\n                    position: new Cesium.Cartesian3(x, y, neoZ),\r\n                    point: {\r\n                        pixelSize: Math.max(4, Math.log10(diameter) * 2),\r\n                        color: isHazardous\r\n                            ? Cesium.Color.RED\r\n                            : Cesium.Color.CYAN,\r\n                        outlineColor: isHazardous ? Cesium.Color.WHITE : Cesium.Color.TRANSPARENT,\r\n                        outlineWidth: 1\r\n                    },\r\n                    label: {\r\n                        text: neo.name.replace(/[()]/g, ''),\r\n                        font: '10px sans-serif',\r\n                        fillColor: isHazardous ? Cesium.Color.RED : Cesium.Color.CYAN,\r\n                        style: Cesium.LabelStyle.FILL_AND_OUTLINE,\r\n                        outlineColor: Cesium.Color.BLACK,\r\n                        outlineWidth: 2,\r\n                        pixelOffset: new Cesium.Cartesian2(10, 0),\r\n                        showBackground: true,\r\n                        backgroundColor: new Cesium.Color(0, 0, 0, 0.8),\r\n                        distanceDisplayCondition: new Cesium.DistanceDisplayCondition(0, 500)\r\n                    },\r\n                    description: `<div style=\"font-family:sans-serif;padding:10px;\">\r\n                        <h3>${neo.name}</h3>\r\n                        <p><strong>Diameter:</strong> ${diameter.toFixed(1)} m</p>\r\n                        <p><strong>Distance:</strong> ${parseFloat(neo.close_approach_data[0].miss_distance.kilometers).toLocaleString()} km</p>\r\n                        <p><strong>Velocity:</strong> ${parseFloat(neo.close_approach_data[0].relative_velocity.kilometers_per_hour).toLocaleString()} km/h</p>\r\n                        <p><strong>Status:</strong> ${isHazardous ? '‚ö†Ô∏è HAZARDOUS' : '‚úì Safe'}</p>\r\n                    </div>`\r\n                });\r\n            });\r\n\r\n            // Set initial camera view\r\n            viewer.camera.setView({\r\n                destination: new Cesium.Cartesian3(0, -800, 400),\r\n                orientation: {\r\n                    heading: 0,\r\n                    pitch: Cesium.Math.toRadians(-45),\r\n                    roll: 0\r\n                }\r\n            });\r\n\r\n            // Zoom to show all entities\r\n            viewer.zoomTo(viewer.entities);\r\n\r\n        } catch (err) {\r\n            console.error('Cesium initialization error:', err);\r\n            setError('Error initializing 3D view');\r\n        }\r\n\r\n        return () => {\r\n            if (viewerRef.current && !viewerRef.current.isDestroyed()) {\r\n                viewerRef.current.destroy();\r\n            }\r\n        };\r\n    }, [cesiumLoaded, neos]);\r\n\r\n    // Handle playback\r\n    useEffect(() => {\r\n        if (viewerRef.current?.clock) {\r\n            viewerRef.current.clock.shouldAnimate = isPlaying;\r\n            viewerRef.current.clock.multiplier = speed;\r\n        }\r\n    }, [isPlaying, speed]);\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"w-full h-full flex items-center justify-center bg-black\">\r\n                <div className=\"text-center p-8\">\r\n                    <p className=\"text-alert-red text-xl font-bold mb-4\">{error}</p>\r\n                    <p className=\"text-white/60\">Please refresh the page to try again</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative w-full h-full bg-black\">\r\n            {/* Loading state */}\r\n            {!cesiumLoaded && (\r\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black z-50\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"w-12 h-12 border-4 border-cyan-glow border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\r\n                        <p className=\"text-cyan-glow font-bold uppercase tracking-widest\">Loading Solar System...</p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Controls */}\r\n            <div className=\"absolute top-4 right-4 z-30 bg-black/90 backdrop-blur-md p-5 rounded-xl border border-white/10 space-y-4\">\r\n                <h3 className=\"text-xs font-bold uppercase text-white tracking-wider\">Controls</h3>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                    <button\r\n                        onClick={() => setIsPlaying(!isPlaying)}\r\n                        className=\"px-4 py-2 bg-white text-black font-bold text-xs uppercase rounded hover:bg-gray-100 transition-colors\"\r\n                    >\r\n                        {isPlaying ? 'Pause' : 'Play'}\r\n                    </button>\r\n\r\n                    <select\r\n                        value={speed}\r\n                        onChange={(e) => setSpeed(Number(e.target.value))}\r\n                        className=\"px-3 py-2 bg-white/10 text-white text-xs font-bold rounded border border-white/20\"\r\n                    >\r\n                        <option value={1}>1x</option>\r\n                        <option value={10}>10x</option>\r\n                        <option value={100}>100x</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"text-[10px] text-white/50 uppercase tracking-wider space-y-1\">\r\n                    <p>üñ±Ô∏è Drag to rotate</p>\r\n                    <p>üîç Scroll to zoom</p>\r\n                    <p>üëÜ Click object for info</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Legend */}\r\n            <div className=\"absolute bottom-4 left-4 z-30 bg-black/90 backdrop-blur-md p-4 rounded-xl border border-white/10 space-y-2\">\r\n                <h3 className=\"text-xs font-bold uppercase text-white tracking-wider mb-3\">Legend</h3>\r\n                <div className=\"flex items-center gap-2 text-xs text-white/80\">\r\n                    <div className=\"w-3 h-3 rounded-full bg-yellow-400\" />\r\n                    <span>Sun</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-xs text-white/80\">\r\n                    <div className=\"w-3 h-3 rounded-full bg-[#4A90E2]\" />\r\n                    <span>Planets</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-xs text-white/80\">\r\n                    <div className=\"w-3 h-3 rounded-full bg-cyan-400\" />\r\n                    <span>Safe Asteroids</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 text-xs text-white/80\">\r\n                    <div className=\"w-3 h-3 rounded-full bg-red-500\" />\r\n                    <span>Hazardous</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Cesium container */}\r\n            <div\r\n                ref={cesiumContainerRef}\r\n                className=\"w-full h-full\"\r\n                style={{ minHeight: '100vh' }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 615, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/digital/OneDrive/Desktop/NEOdashboard/app/visualizer/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { ArrowLeft, Loader2, AlertCircle } from 'lucide-react';\r\nimport CesiumAsteroidVis from '@/components/visualization/CesiumAsteroidVis';\r\nimport axios from 'axios';\r\n\r\nexport default function VisualizerPage() {\r\n    const [neos, setNeos] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchNeos = async () => {\r\n            try {\r\n                const res = await axios.get('/api/neos');\r\n                // NASA API structure: near_earth_objects is an object with date keys\r\n                // We need to flatten this to get a list of all asteroids\r\n                const rawData = res.data.near_earth_objects;\r\n                const flattened = Object.values(rawData).flat();\r\n                setNeos(flattened as any);\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch NEOs\", err);\r\n                setError(\"Failed to load trajectory data. Please check your connection and try again.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchNeos();\r\n    }, []);\r\n\r\n    return (\r\n        <main className=\"w-screen h-screen relative bg-black overflow-hidden flex flex-col\">\r\n            {/* Header Overlay */}\r\n            <div className=\"absolute top-0 left-0 w-full z-20 p-6 flex justify-between items-start pointer-events-none\">\r\n                <Link href=\"/\" className=\"pointer-events-auto flex items-center group\">\r\n                    <div className=\"p-3 bg-black/60 border border-white/10 rounded-full backdrop-blur-md group-hover:border-cyan-glow/50 transition-colors\">\r\n                        <ArrowLeft className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                </Link>\r\n\r\n                <div className=\"text-right pointer-events-auto\">\r\n                    <h1 className=\"text-4xl font-black text-white tracking-widest uppercase mb-1 drop-shadow-md\">\r\n                        Trajectory Engine\r\n                    </h1>\r\n                    <p className=\"text-cyan-glow font-bold text-xs uppercase tracking-[0.2em]\">\r\n                        Live Near-Earth Object Visualizer\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Legend / Status Overlay */}\r\n            <div className=\"absolute bottom-8 left-8 z-20 bg-black/70 backdrop-blur-md p-4 rounded-xl border border-white/10 text-white w-64 pointer-events-none\">\r\n                <h3 className=\"text-xs font-bold uppercase text-void-gray mb-3 tracking-wider\">System Status</h3>\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-bold\">Objects Tracked</span>\r\n                    <span className=\"text-cyan-glow font-mono\">{neos.length}</span>\r\n                </div>\r\n                <div className=\"h-px bg-white/10 my-2\" />\r\n                <div className=\"space-y-2 text-xs\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-alert-red\" />\r\n                        <span className=\"text-white/80\">Hazardous Object</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-[#a9a9a9]\" />\r\n                        <span className=\"text-white/80\">Non-Hazardous</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-[#4361ee]\" />\r\n                        <span className=\"text-white/80\">Earth</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            <div className=\"flex-1 relative z-10 w-full h-full\">\r\n                {loading && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black\">\r\n                        <Loader2 className=\"w-12 h-12 text-cyan-glow animate-spin\" />\r\n                        <p className=\"mt-4 text-white text-sm uppercase tracking-widest absolute top-1/2 pt-10\">Initializing Orbit...</p>\r\n                    </div>\r\n                )}\r\n\r\n                {error && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black\">\r\n                        <div className=\"text-center\">\r\n                            <AlertCircle className=\"w-12 h-12 text-alert-red mx-auto mb-4\" />\r\n                            <p className=\"text-white text-lg font-bold\">{error}</p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {!loading && !error && (\r\n                    <CesiumAsteroidVis neos={neos} />\r\n                )}\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACpB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,IAAA,0KAAS;oCAAC;YACN,MAAM;sDAAY;oBACd,IAAI;wBACA,MAAM,MAAM,MAAM,mJAAK,CAAC,GAAG,CAAC;wBAC5B,qEAAqE;wBACrE,yDAAyD;wBACzD,MAAM,UAAU,IAAI,IAAI,CAAC,kBAAkB;wBAC3C,MAAM,YAAY,OAAO,MAAM,CAAC,SAAS,IAAI;wBAC7C,QAAQ;oBACZ,EAAE,OAAO,KAAK;wBACV,QAAQ,KAAK,CAAC,wBAAwB;wBACtC,SAAS;oBACb,SAAU;wBACN,WAAW;oBACf;gBACJ;;YAEA;QACJ;mCAAG,EAAE;IAEL,qBACI,6LAAC;QAAK,WAAU;;0BAEZ,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,0KAAI;wBAAC,MAAK;wBAAI,WAAU;kCACrB,cAAA,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,gOAAS;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAI7B,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAG7F,6LAAC;gCAAE,WAAU;0CAA8D;;;;;;;;;;;;;;;;;;0BAOnF,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAAiE;;;;;;kCAC/E,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAK,WAAU;0CAAoB;;;;;;0CACpC,6LAAC;gCAAK,WAAU;0CAA4B,KAAK,MAAM;;;;;;;;;;;;kCAE3D,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;;0CAEpC,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;;0CAEpC,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;;;;;;;;;;;;;;0BAM5C,6LAAC;gBAAI,WAAU;;oBACV,yBACG,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,+NAAO;gCAAC,WAAU;;;;;;0CACnB,6LAAC;gCAAE,WAAU;0CAA2E;;;;;;;;;;;;oBAI/F,uBACG,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,sOAAW;oCAAC,WAAU;;;;;;8CACvB,6LAAC;oCAAE,WAAU;8CAAgC;;;;;;;;;;;;;;;;;oBAKxD,CAAC,WAAW,CAAC,uBACV,6LAAC,+JAAiB;wBAAC,MAAM;;;;;;;;;;;;;;;;;;AAK7C;GA7FwB;KAAA"}}]
}